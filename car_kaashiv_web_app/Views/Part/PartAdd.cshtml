@model car_kaashiv_web_app.Models.DTOs.PartsAddDto

<a class="btn btn-secondary" href="~/Employee/EmployeeDashboard">Back</a>
<hr />
<h4 class="text-center">Add New Part</h4>
<hr />
<!--navigating to a view—specifically, it performs a GET request-->


<div class="container">
    <div class="row justify-content-center ">
        <div class="col-md-4 align-items-md-center">
        <form asp-action="AddPart" asp-controller="Part" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="PEmpId" class="control-label">Employee ID</label>
                <input asp-for="PEmpId" class="form-control" readonly />
                <span asp-validation-for="PEmpId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PName" class="control-label">Part Name</label>
                <input asp-for="PName" class="form-control" />
                <span asp-validation-for="PName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PDetail" class="control-label">Details</label>
                <textarea asp-for="PDetail" class="form-control"></textarea>
                <span asp-validation-for="PDetail" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PPrice" class="control-label">Price</label>
                <input asp-for="PPrice" class="form-control" />
                <span asp-validation-for="PPrice" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PStock" class="control-label">Stock</label>
                <input asp-for="PStock" class="form-control" />
                <span asp-validation-for="PStock" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="ImagePath" class="control-label">Image</label>
                <input asp-for="ImagePath"
                       class="form-control" type="file"
                       accept=".jpg,.jpeg,.png"
                       onchange="previewImage(this)" />
                <span asp-validation-for="ImagePath" class="text-danger"></span>
            </div>
            <div class="mt-4 ">
                <img id="imgPreview"
                     src="#"
                     alt="Image preview"
                     style="display:none; max-width:200px; margin-top:10px;" />
            </div> 
            <div>
                <input type="submit" value="Create" class="btn btn-primary" />
                <a class="btn btn-secondary" asp-action="PartList">Part List</a>
            </div>
           
        </form>
    </div>
</div>
</div>





@section Scripts {  
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");       
 
     }
    <script>
         function previewImage(input) {
        if (input.files && input.files[0]) {           
            var reader = new FileReader();
            reader.onload = function (e) {
                var output = document.getElementById('imgPreview');
                output.src = e.target.result; // the base64 image string
                output.style.display = 'block';
            };
            reader.readAsDataURL(input.files[0]);
        } else {            
            // Reset preview if no file selected
            var output = document.getElementById('imgPreview');
            output.src = "#";
            output.style.display = 'none';
        }
      }
    </script>
}